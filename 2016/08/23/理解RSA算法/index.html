
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>理解RSA算法 | JrDong’s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="JrDong">
    
    <meta name="description" content="理解RSA算法
本文是看完阮一峰的”RSA算法原理”后所做的笔记,有兴趣的同学可以移步至:RSA算法原理–阮一峰
一.简介非对称加密算法:非对称加密需要两个密钥,公钥和私钥.1.乙方生成两把密钥(公钥和私钥).公钥是公开的,任何人都可以获得,私钥是保密的2.甲方获取乙方的公钥,然后用它对信息加密3.">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?c00e8927384103b054b92a9d4b05f4aa";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="JrDong’s Blog" title="JrDong’s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="JrDong’s Blog">JrDong’s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">博客</a></li>
					
						<li><a href="/archives">存档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:ibat.xyz">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/23/理解RSA算法/" title="理解RSA算法" itemprop="url">理解RSA算法</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://ibat.xyz" title="JrDong">JrDong</a>
    </p>
  <p class="article-time">
    <time datetime="2016-08-23T13:34:21.000Z" itemprop="datePublished">2016-08-23</time>
    更新日期:<time datetime="2016-11-21T13:37:23.000Z" itemprop="dateModified">2016-11-21</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#u7406_u89E3RSA_u7B97_u6CD5"><span class="toc-number">1.</span> <span class="toc-text">理解RSA算法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E00-_u7B80_u4ECB"><span class="toc-number">1.1.</span> <span class="toc-text">一.简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E8C-_u6B27_u62C9_u51FD_u6570"><span class="toc-number">1.2.</span> <span class="toc-text">二.欧拉函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u4E00_u79CD_u60C5_u51B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">第一种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u4E8C_u79CD_u60C5_u51B5"><span class="toc-number">1.2.2.</span> <span class="toc-text">第二种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u4E09_u79CD_u60C5_u51B5"><span class="toc-number">1.2.3.</span> <span class="toc-text">第三种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u56DB_u79CD_u60C5_u51B5"><span class="toc-number">1.2.4.</span> <span class="toc-text">第四种情况</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E09-_u6B27_u62C9_u5B9A_u7406"><span class="toc-number">1.3.</span> <span class="toc-text">三.欧拉定理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u56DB-_u6A21_u53CD_u5143_u7D20"><span class="toc-number">1.4.</span> <span class="toc-text">四.模反元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E94-RSA_u7B97_u6CD5_u539F_u7406"><span class="toc-number">1.5.</span> <span class="toc-text">五.RSA算法原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-_u5BC6_u94A5_u751F_u6210_u6B65_u9AA4"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.密钥生成步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-RSA_u7B97_u6CD5_u7684_u53EF_u9760_u6027"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.RSA算法的可靠性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-_u52A0_u5BC6_u548C_u89E3_u5BC6"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.加密和解密</span></a></li></ol></li></ol></li></ol>
		</div>
		
		<h1 id="u7406_u89E3RSA_u7B97_u6CD5"><a href="#u7406_u89E3RSA_u7B97_u6CD5" class="headerlink" title="理解RSA算法"></a>理解RSA算法</h1><blockquote>
<p>本文是看完阮一峰的”RSA算法原理”后所做的笔记,有兴趣的同学可以移步至:<a href="http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html" target="_blank" rel="external">RSA算法原理–阮一峰</a></p>
<h2 id="u4E00-_u7B80_u4ECB"><a href="#u4E00-_u7B80_u4ECB" class="headerlink" title="一.简介"></a>一.简介</h2><p><strong>非对称加密算法:非对称加密需要两个密钥,公钥和私钥.</strong><br>1.乙方生成两把密钥(公钥和私钥).公钥是公开的,任何人都可以获得,私钥是保密的<br>2.甲方获取乙方的公钥,然后用它对信息加密<br>3.乙方得到加密后的信息,用私钥解密    </p>
</blockquote>
<p>如果公钥加密的信息只有私钥解得开,只要私钥不泄露,通信就是安全的.</p>
<h2 id="u4E8C-_u6B27_u62C9_u51FD_u6570"><a href="#u4E8C-_u6B27_u62C9_u51FD_u6570" class="headerlink" title="二.欧拉函数"></a>二.欧拉函数</h2><p><a href="https://zh.wikipedia.org/wiki/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0" target="_blank" rel="external">欧拉函数</a>,在数论中，对正整数n，欧拉函数φ(n)是小于或等于n的正整数中与n互质的数的数目.例如:φ(8) = 4,因为1,3,5,7均与8互质.  </p>
<p>通式:<br><img src="/img/rsatongshi.jpeg" alt="欧拉函数公式(1)"><br>其中p1,p2….pn为x的所有质因数,x为不为0的整数.注意：<strong>每种质因数只一个</strong>。<br>比如:12 = 2×2×3 那么 φ（12）=12<em>（1-1/2）</em>(1-1/3)=4  </p>
<h3 id="u7B2C_u4E00_u79CD_u60C5_u51B5"><a href="#u7B2C_u4E00_u79CD_u60C5_u51B5" class="headerlink" title="第一种情况"></a>第一种情况</h3><p>如果n=1，则 φ(1) = 1 。因为1与任何数（包括自身）都构成互质关系。</p>
<h3 id="u7B2C_u4E8C_u79CD_u60C5_u51B5"><a href="#u7B2C_u4E8C_u79CD_u60C5_u51B5" class="headerlink" title="第二种情况"></a>第二种情况</h3><p>如果n是质数，则 φ(n)=n-1 。因为质数与小于它的每一个数，都构成互质关系。比如5与1、2、3、4都构成互质关系。</p>
<h3 id="u7B2C_u4E09_u79CD_u60C5_u51B5"><a href="#u7B2C_u4E09_u79CD_u60C5_u51B5" class="headerlink" title="第三种情况"></a>第三种情况</h3><p>如果n是质数的某一个次方，即 n = p^k (p为质数，k为大于等于1的整数)，则<br><img src="/img/rsa3.jpeg" alt="欧拉函数公式(2)"><br>这是因为只有当一个数不包含质数p，才可能与n互质。而包含质数p的数一共有p^(k-1)个，即1×p、2×p、3×p、…、p^(k-1)×p，把它们去除，剩下的就是与n互质的数。</p>
<h3 id="u7B2C_u56DB_u79CD_u60C5_u51B5"><a href="#u7B2C_u56DB_u79CD_u60C5_u51B5" class="headerlink" title="第四种情况"></a>第四种情况</h3><p>如果n可以分解成两个互质的整数之积<br><strong>n = p1 × p2</strong>   则  <strong>φ(n) = φ(p1p2) = φ(p1)φ(p2)</strong></p>
<h2 id="u4E09-_u6B27_u62C9_u5B9A_u7406"><a href="#u4E09-_u6B27_u62C9_u5B9A_u7406" class="headerlink" title="三.欧拉定理"></a>三.欧拉定理</h2><p>如果两个正整数a和n互质，则n的欧拉函数 φ(n) 可以让下面的等式成立：<br><img src="/img/ouladingli.jpeg" alt="欧拉定理"><br>也就是说，a的φ(n)次方被n除的余数为1。或者说，a的φ(n)次方减去1，可以被n整除。比如，3和7互质，而7的欧拉函数φ(7)等于6，所以3的6次方（729）减去1，可以被7整除（728/7=104）。<br>欧拉定理有一个特殊情况。<br>假设正整数a与质数p互质，因为质数p的φ(p)等于p-1，则欧拉定理可以写成<br><img src="/img/ouladingli2.jpeg" alt="欧拉定理">  </p>
<h2 id="u56DB-_u6A21_u53CD_u5143_u7D20"><a href="#u56DB-_u6A21_u53CD_u5143_u7D20" class="headerlink" title="四.模反元素"></a>四.模反元素</h2><p>如果两个正整数a和n互质，那么一定可以找到整数b，使得 ab-1 被n整除，或者说ab被n除的余数是1。</p>
<blockquote>
<p>###<strong>ab ≡ 1( mod n )</strong>  </p>
</blockquote>
<p>这时，b就叫做a的”模反元素”。<br>比如，3和11互质，那么3的模反元素就是4，因为 (3 × 4)-1 可以被11整除。显然，模反元素不止一个， 4加减11的整数倍都是3的模反元素 {…,-18,-7,4,15,26,…}，即如果b是a的模反元素，则 b+kn 都是a的模反元素。</p>
<h2 id="u4E94-RSA_u7B97_u6CD5_u539F_u7406"><a href="#u4E94-RSA_u7B97_u6CD5_u539F_u7406" class="headerlink" title="五.RSA算法原理"></a>五.RSA算法原理</h2><h3 id="1-_u5BC6_u94A5_u751F_u6210_u6B65_u9AA4"><a href="#1-_u5BC6_u94A5_u751F_u6210_u6B65_u9AA4" class="headerlink" title="1.密钥生成步骤"></a>1.密钥生成步骤</h3><p>比如,老张和老王是两名地下工作者,老张要向老王传达一个机密的文件.这时老张想到了RSA算法.<br><strong>(1)  随机选择两个不相等的质数p,q.</strong><br>这时,老张选择了61和53.<br><strong>(2)  计算p和q的乘积n.</strong>  </p>
<pre><code>n = p * q = 61 * 53 = 3233.  
</code></pre><p>n的长度就是密钥长度。3233写成二进制是110010100001，一共有12位，所以这个密钥就是12位。实际应用中，RSA密钥一般是1024位，重要场合则为2048位。<br><strong>(3)  计算n的欧拉函数φ(n).</strong><br>根据上面所介绍的欧拉定理第四种情况:</p>
<pre><code>φ(n) = φ(3233) = φ(61) * φ(53) = 60 * 52 = 3120;  
</code></pre><p><strong>(4)  随机选择一个整数e，条件是1&lt; e &lt; φ(n)，且e与φ(n) 互质.</strong><br>这时,老张从1-3120之间,随机选择了17.（实际应用中，常常选择65537）.<br><strong>(5)  计算e对于φ(n)的模反元素d</strong><br>所谓”模反元素”就是指有一个整数d，可以使得ed被φ(n)除的余数为1。</p>
<pre><code>ed ≡ 1 (mod φ(n))  
</code></pre><p>这个公式等价于 </p>
<pre><code>ed - 1 = kφ(n)
</code></pre><p>于是，找到模反元素d，实质上就是对下面这个二元一次方程求解。</p>
<pre><code>ex - φ(n)y = 1
</code></pre><p>那么,已知e = 17,φ(n) = 3120 ,求x的值 </p>
<pre><code>17x - 3120y = 1  
</code></pre><p>这个方程可以用”扩展欧几里得算法”求解，此处省略具体过程。总之，老张算出一组整数解为 (x,y)=(2753,15)，即 d=2753。<br><strong>(6)  将n和e封装成公钥，n和d封装成私钥</strong><br>n=3233，e=17，d=2753，所以公钥就是 (3233,17)，私钥就是（3233, 2753）,即公钥为( n,e ),私钥为( n,d )。<br>实际应用中，公钥和私钥的数据都采用<a href="https://zh.wikipedia.org/zh-cn/ASN.1" target="_blank" rel="external">ASN.1</a>格式表达。  </p>
<h3 id="2-RSA_u7B97_u6CD5_u7684_u53EF_u9760_u6027"><a href="#2-RSA_u7B97_u6CD5_u7684_u53EF_u9760_u6027" class="headerlink" title="2.RSA算法的可靠性"></a>2.RSA算法的可靠性</h3><p>老张进行了这些计算后,整理了下上面所提到的数字:  </p>
<pre><code>随机选择的两个质数:p 61 , q 53  
质数的乘积:n
n的欧拉函数φ(n):3120
随机选择的整数e:17
e的模反元素d:2753
</code></pre><p>这六个数字之中，公钥用到了两个（n和e），其余四个数字都是不公开的。其中最关键的是d，因为n和d组成了私钥，一旦d泄漏，就等于私钥泄漏。<br><strong>老张想,有没有可能在已知n和e的情况下,也就是知道公钥的情况下,推导出d?</strong>  </p>
<pre><code>（1）ed≡1 (mod φ(n))。只有知道e和φ(n)，才能算出d。
（2）φ(n)=(p-1)(q-1)。只有知道p和q，才能算出φ(n)。
（3）n=pq。只有将n因数分解，才能算出p和q。
</code></pre><p>结论：如果n可以被因数分解，d就可以算出，也就意味着私钥被破解。可是，大整数的因数分解，是一件非常困难的事情.</p>
<blockquote>
<p>　 “对极大整数做因数分解的难度决定了RSA算法的可靠性。换言之，对一极大整数做因数分解愈困难，RSA算法愈可靠。<br>　假如有人找到一种快速因数分解的算法，那么RSA的可靠性就会极度下降。但找到这样的算法的可能性是非常小的。今天只有短的RSA密钥才可能被暴力破解。到2008年为止，世界上还没有任何可靠的攻击RSA算法的方式。<br>　只要密钥长度足够长，用RSA加密的信息实际上是不能被解破的。”</p>
</blockquote>
<h3 id="3-_u52A0_u5BC6_u548C_u89E3_u5BC6"><a href="#3-_u52A0_u5BC6_u548C_u89E3_u5BC6" class="headerlink" title="3.加密和解密"></a>3.加密和解密</h3><p>有了公钥和密钥，就能进行加密和解密了。<br>1.加密要用公钥 (n,e)<br>假设老张要向老王发送加密信息m，他就要用老王的公钥 (n,e) 对m进行加密。这里需要注意，m必须是整数（字符串可以取ascii值或unicode值），且m必须小于n。<br>所谓”加密”，就是算出下式的c：  </p>
<pre><code>me ≡ c (mod n)
</code></pre><p>老王的公钥是 (3233, 17)，老张的m假设是65，那么可以算出下面的等式：</p>
<pre><code>6517 ≡ 2790 (mod 3233)
</code></pre><p>于是，c等于2790，老张就把2790发给了老王。  </p>
<p>2.解密要用私钥(n,d)<br>老王拿到老张发来的2790以后，就用自己的私钥(3233, 2753) 进行解密。可以证明，下面的等式一定成立：（证明过程略，有兴趣可以看阮一峰的博客）  </p>
<pre><code>cd ≡ m (mod n)
</code></pre><p>　　<br>也就是说，c的d次方除以n的余数为m。现在，c等于2790，私钥是(3233, 2753)，那么，老王算出  </p>
<pre><code>27902753 ≡ 65 (mod 3233)
</code></pre><p>因此，老王知道了老张加密前的原文就是65。  </p>
<p>我们可以看到，如果不知道d，就没有办法从c求出m。而前面已经说过，要知道d就必须分解n，这是极难做到的，所以RSA算法保证了通信安全。<br>你可能会问，公钥(n,e) 只能加密小于n的整数m，那么如果要加密大于n的整数，该怎么办？有两种解决方法：一种是把长信息分割成若干段短消息，每段分别加密；另一种是先选择一种”对称性加密算法”（比如DES），用这种算法的密钥加密信息，再用RSA公钥加密DES密钥。</p>
  
	</div>
		<footer class="article-footer clearfix">


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://ibat.xyz/2016/08/23/理解RSA算法/" data-title="理解RSA算法 | JrDong’s Blog" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/02/05/2017年，我的小目标/" title="2017年，我的小目标">
  <strong>PREVIOUS:</strong><br/>
  <span>
  2017年，我的小目标</span>
</a>
</div>


<div class="next">
<a href="/2016/07/16/使用productFlavors配置项目移植/"  title="使用productFlavors配置项目移植">
 <strong>NEXT:</strong><br/> 
 <span>使用productFlavors配置项目移植
</span>
</a>
</div>

</nav>

 	 
<section class="comment">
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key=”2016/08/23/理解RSA算法/” data-title=”理解RSA算法”  data-url="http://ibat.xyz/http://ibat.xyz/2016/08/23/理解RSA算法/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"ibat"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#u7406_u89E3RSA_u7B97_u6CD5"><span class="toc-number">1.</span> <span class="toc-text">理解RSA算法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E00-_u7B80_u4ECB"><span class="toc-number">1.1.</span> <span class="toc-text">一.简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E8C-_u6B27_u62C9_u51FD_u6570"><span class="toc-number">1.2.</span> <span class="toc-text">二.欧拉函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u4E00_u79CD_u60C5_u51B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">第一种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u4E8C_u79CD_u60C5_u51B5"><span class="toc-number">1.2.2.</span> <span class="toc-text">第二种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u4E09_u79CD_u60C5_u51B5"><span class="toc-number">1.2.3.</span> <span class="toc-text">第三种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u7B2C_u56DB_u79CD_u60C5_u51B5"><span class="toc-number">1.2.4.</span> <span class="toc-text">第四种情况</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E09-_u6B27_u62C9_u5B9A_u7406"><span class="toc-number">1.3.</span> <span class="toc-text">三.欧拉定理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u56DB-_u6A21_u53CD_u5143_u7D20"><span class="toc-number">1.4.</span> <span class="toc-text">四.模反元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E94-RSA_u7B97_u6CD5_u539F_u7406"><span class="toc-number">1.5.</span> <span class="toc-text">五.RSA算法原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-_u5BC6_u94A5_u751F_u6210_u6B65_u9AA4"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.密钥生成步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-RSA_u7B97_u6CD5_u7684_u53EF_u9760_u6027"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.RSA算法的可靠性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-_u52A0_u5BC6_u548C_u89E3_u5BC6"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.加密和解密</span></a></li></ol></li></ol></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/Android/" title="Android">Android<sup>9</sup></a></li>
		
			<li><a href="/categories/Android资源整理/" title="Android资源整理">Android资源整理<sup>1</sup></a></li>
		
			<li><a href="/categories/markdown/" title="markdown">markdown<sup>1</sup></a></li>
		
			<li><a href="/categories/学习笔记/" title="学习笔记">学习笔记<sup>2</sup></a></li>
		
		</ul>
</div>


  

  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> “业精于勤而荒于嬉” <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font clearfix">
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2017 
		
		<a href="http://ibat.xyz" target="_blank" title="JrDong">JrDong</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"ibat"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





     </body>
</html>
